

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>For researchers &mdash; artmonline-docs 1 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="artmonline-docs 1 documentation" href="index.html"/>
        <link rel="next" title="Visualizations" href="visualizations.html"/>
        <link rel="prev" title="Overview" href="overview.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> artmonline-docs
          

          
          </a>

          
            
            
              <div class="version">
                1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">For researchers</a></li>
<li class="toctree-l1"><a class="reference internal" href="visualizations.html">Visualizations</a></li>
<li class="toctree-l1"><a class="reference internal" href="formats.html">Formats</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">artmonline-docs</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>For researchers</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/for_researchers.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="for-researchers">
<h1>For researchers<a class="headerlink" href="#for-researchers" title="Permalink to this headline">¶</a></h1>
<p>Этот раздел предназначен для исследователей, которые будут разворачивать ARTM Online локально на свойм компьтере.</p>
<p class="rubric">Разворачивание ARTM Online</p>
<ol class="arabic simple">
<li>Установите python 3 (рекомендуется anaconda).</li>
<li>Установите django</li>
</ol>
<div class="highlight-bash"><div class="highlight"><pre><span></span>pip install django
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li>Установите систему управления базами данных. Рекомендуеся PostgreSQL.</li>
<li>Создайте базу данных artmonlinedb. Запомните имя пользователя и пароль для доступа к этой базе данных. Имя пользователя по умолчанию в PostgreSQL - postgres.</li>
<li>Установите git</li>
<li>Склонируйте проект ARTM Online на свой компьютер. Для этого создайте где-нибудь папку artmonline, перейдите в неё и выполните</li>
</ol>
<div class="highlight-bash"><div class="highlight"><pre><span></span>git clone https://github.com/fedimser/artmonline.git
</pre></div>
</div>
<ol class="arabic simple" start="7">
<li>Теперь нужно связать проект c базой данных. Сначала откройте файл artmonline/settings.py и найдите там такие строчки</li>
</ol>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">DATABASES</span> <span class="o">=</span> <span class="p">{</span>
             <span class="s1">&#39;default&#39;</span><span class="p">:</span> <span class="p">{</span>
                     <span class="s1">&#39;ENGINE&#39;</span><span class="p">:</span> <span class="s1">&#39;django.db.backends.postgresql_psycopg2&#39;</span><span class="p">,</span>
                     <span class="s1">&#39;NAME&#39;</span><span class="p">:</span> <span class="s1">&#39;artmonlinedb&#39;</span><span class="p">,</span>
                     <span class="s1">&#39;USER&#39;</span><span class="p">:</span> <span class="s1">&#39;postgres&#39;</span><span class="p">,</span>
                     <span class="s1">&#39;PASSWORD&#39;</span><span class="p">:</span> <span class="s1">&#39;******&#39;</span><span class="p">,</span>
                     <span class="s1">&#39;HOST&#39;</span><span class="p">:</span> <span class="s1">&#39;127.0.0.1&#39;</span><span class="p">,</span>
                     <span class="s1">&#39;PORT&#39;</span><span class="p">:</span> <span class="s1">&#39;5432&#39;</span><span class="p">,</span>
             <span class="p">}</span>
     <span class="p">}</span>
</pre></div>
</div>
<p>Внесите изменения, соответствующие вашей СУБД. Если вы используете PostgreSQL с настройками по умолчанию, понадобится изменить только пароль.</p>
<ol class="arabic simple" start="8">
<li>Теперь нужно, чтобы django создал нужные ему таблицы. Для этого выполните</li>
</ol>
<div class="highlight-bash"><div class="highlight"><pre><span></span>python manage.py makemigrations
python manage.py migrate
</pre></div>
</div>
<ol class="arabic simple" start="9">
<li>Создайте суперпользователя (эти логин и пароль потом нужно будет ввести, когда сервис попросит вас залогиниться)</li>
</ol>
<div class="highlight-bash"><div class="highlight"><pre><span></span>python manage.py createsuperuser
</pre></div>
</div>
<ol class="arabic simple" start="10">
<li>Запустите сервер</li>
</ol>
<div class="highlight-bash"><div class="highlight"><pre><span></span>python manage.py runserver
</pre></div>
</div>
<ol class="arabic simple" start="11">
<li>Зайдите в браузере по адресу <a class="reference external" href="http://127.0.0.1:8000">http://127.0.0.1:8000</a></li>
</ol>
<p class="rubric">Начало работы с ARTM Online</p>
<p>Для начала разберёмся с объктной моделью.</p>
<p>Dataset - это набор документов. Он обязательно содержит словарь (список терминов) и &#8220;мешки слов&#8221;. Опциаонально он может содержать текст документов,
вхождения терминов в этот текст (это будем называть word_index), дополнительную информацию о документах (дата, время, название,
краткое описание (snippet), ссылку на оригинал в документе).</p>
<p>Термины принадлежат модальностям. Если модальностей нет, считается, что все термины принадлежат модальности &#64;default_class.</p>
<p>Модель (ArtmModel) содержит всю информацию некоторой тематической модели о dataset&#8217;е (а именно, матрицы Θ, Φ, Ψ) и производную информацию.</p>
<p class="rubric">Загрузка dataset&#8217;а</p>
<p>Итак, для начала работы нужно загрузить dataset. Создайте в папке проекта папку data, в ней папку datasets, в ней папку для каждого dataset&#8217;а.
В папке dataset&#8217;a создайте папку UCI, в которой нужно будет поместить два файла с описанием словаря и мешков слов. Этого достаточно для того, чтобы
можно было строить модели, но вы не сможете посмотреть текст. Поэтому, ессли у вас есть все документы в текстовом виде, загрузите их в папку
documents, именуя номерами с единицы с расширением .txt. Загрузите &#8220;файлы индексов&#8221; в папку &#8220;word_index&#8221;. Наконец, создайте файл documents.json
с мета-данными всех документов. В итоге должна получиться такая файловая структура:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>artmonline
             data
                     datasets
                             dataset1
                                     UCI
                                             docword.dataset1.txt
                                             vocab.dataset1.txt
                                     documents
                                             1.txt
                                             2.txt
                                             .....
                                     word_index
                                             1.txt
                                             2.txt
                                             .....
                                     documents.json
</pre></div>
</div>
<p>Теперь подробно разберём все файлы. Файл vocab.dataset1.txt (вместо dataset1 поставьте имя вашего dataset&#8217;a, так же должна назыаться папка dataset&#8217;a)
должен содержать в себе столько же строк, сколько слов в словаре. На каждой строке должно быть по одному слову. Если у вас есть модельности,
то на каждой строке, после слова, через пробел, напишите название модальностей. Никаких пробелов в терминах быть не доолжно. Если у вас N-граммы,
используйте нижнее подчёркивание.</p>
<p>Файл docword.dataset1.txt содержит мешки слов. В первой строчке записано число документов,
во второй - число терминов (должно совпадать с числом строк в предыдущем файле), в третьей - число строчек в файле (первые три не считаются).
Во всех остальных строчках записано по три числа - номер документа, номер слова, количество вхождений. Важно, чтобы номера слов соответсвовали
их положению в словаре (нумерация с единицы).</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>D
W
NNZ
docID wordID count
docID wordID count
...
docID wordID count
</pre></div>
</div>
<p>Примеры можно посмотреть на <a class="reference external" href="https://archive.ics.uci.edu/ml/machine-learning-databases/bag-of-words/readme.txt">https://archive.ics.uci.edu/ml/machine-learning-databases/bag-of-words/readme.txt</a></p>
<p>Важно, чтобы в каждом документе был хотя бы один термин.</p>
<p>Документы в папке documents - просто текст.</p>
<p>Файлы в папке word_index нужны исключительно для того, чтобы подсвечивать слова при визуализации. Не все слова являются терминами, слова в документе
не всегда в начальной форме, иногда термины - это n-граммы. Поэтому необходимо указать, где именно в документе находяся какие термины.
Файлы в папке word_index состоят из нескольких (по числу терминов) строк, в каждой по четыре целых числа</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>line start_pos length term_id
</pre></div>
</div>
<p>line - это номер строчки (нумерация с единицы), start_pos - начало термина в этой строчке (нкмерация с нуля!), length - длина вхождения,
term_id - номер термина в той же нумерации, что в файле docword.</p>
<p>Наконец, documents.json - это JSON-словарь со всей информацией о документах. Его ключи - это номера документов,
а значения словари со следующими полями:</p>
<div class="highlight-bash"><div class="highlight"><pre><span></span>title
snippet
url
<span class="nb">time</span>
</pre></div>
</div>
<p>Время должно быть JSON-списком из шести целых чисел (год, месяц, день, час, минута, секунда).</p>
<p>Теперь, когда вы поместили все нужные данные, можно их импортировать. Для этого в интерфейсе ARTM Online выберите пунккт Datasets вверху, потом справа
нажмите на Create new dataset... Выберите вкладку Local, в ней из списка Dataset name выберите имя вашего dataset&#8217;a (система находит его автоматически,
если вы его поместилии в правильную папку). Теперь правильно установите следующие галочки (это важно!):</p>
<ul class="simple">
<li>UCI vocab and docword provided - включите обязательно</li>
<li>documents.json provided - включите, если есть файл documents.json</li>
<li>text provided - включите, если есть текстовые файлы</li>
<li>Word index provided - включите, если есть файлы word_index</li>
<li>Time provided provided - включите, если есть время</li>
</ul>
<p>Нажмите на кнопку Create и подождите, пока dataset импортируется.</p>
<p>Теперь у вас появились папки batches и models в папке с dataset&#8217;ом. В папке batches находятся ыходные данные для BigARTM. Используйте только их!</p>
<p class="rubric">Создание модели</p>
<p>Для бытрого старта попробуйте встроенные построители моделей.
Зайдите в Datasets, выберите только что созданный датасет, нажмите справа Create new model...
Выберите Flat или Hierarchical, задайте нужное число тем и нажмите Create.</p>
<p>Рассмотрим другой вариант. Вы будете сами писать
скрипт на python, строящий модель,
а ARTM Online будет обрабатывать выход вашего скрипта и строить визуализацию.</p>
<p>Сначала зайдите в Datasets, выберите только что чозданный датасет, нажмите справа Create new model... Теперь выберите вкладку Empty и нажмите create.
У вас появится папка в папке models. Там будет образец скрипта, который читает данные из батчей, строит простую модель и пишет матрицы в виде
pandas.dataframe&#8217;ов в папку с моделью. Разумеется, Вы можете поместить свой скрипт где угодно, главное читать и писать в правильных местах.</p>
<p>Итак, Ваш скрипт должен сохранять результат работы BigARTM&#8217;а. Это матрицы тета и фи. Сохраняйте их с помощью to_pickle() в файлы theta и phi.</p>
<p>Если строите N-уровневую иерархию с помощью hARTM, то надо ещё сохранить файлы psi1, psi2, ..., psi(N-1).</p>
<p>Когда сохранили все матрицы, перейдите на страницу модели (к ней можно попасть или со страницы датасета, ищите справа список моделей,
или со страницы своего профиля). Там нажмите на Reload Model. Подождите, пока произойдёт импорт. Теперь можете смотреть на физуализацию вашей модели.</p>
<p>Можно работать так. Создайте одну модель, вносите в неё изменения и перезагружайте.
Можно создаать несколько моделей (например, с разными параметрами). Они все будут доступны одновременнл.</p>
<p class="rubric">Визуализации</p>
<p>Вы можете смотреть информацию о следующих объектах: документы, темы, термины, модальности, сама модель.</p>
<p>Кроме того, можно смотреть разные визуализации модели в целом. Список всех доступных визуализаций находится на странице dataset&#8217;а.
Если у вас несколько моделей, то с помощью &#8220;радио-кнопок&#8221; выберите (на странице датасета), какую модель вы хотите использовать для визуализации.</p>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="visualizations.html" class="btn btn-neutral float-right" title="Visualizations" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="overview.html" class="btn btn-neutral" title="Overview" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, fedimser.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>