{% extends 'base.html' %}

{% block title %}Artm Online | Term {{term.text}} {% endblock %}

{% block content %}
	<h1> Term {{term.text}} </h1> 
	<hr>
	<div id="documents"></div>
	<p></p>
	<p><a id = "morelink" onclick = "append(20)"></a></p>	
{% endblock %}
 
 
{% block right %}
	<h4>Information</h4>
	Dataset: <a href ="/dataset?dataset={{term.dataset.text_id}}">{{term.dataset}}</a><br>
	Modality: <a href = "/modality?id={{term.modality.id}}">{{term.modality}}</a><br>
	index_id: {{term.index_id}}<br> 
	token_value: {{term.token_value}}<br>
	Occured in {{term.token_df}} documents<br>
	Total occurencies in dataset: {{term.token_tf}}<br>
	
{% endblock %}
 

{% block javascript %}
<script type="text/javascript">	
	api = new ArtmApi();
	counter = 0;
	append(20);
	
	function append(count) {
		api.getDocumentsByTerm({{term.id}}, counter, count, function(documents) {
			documents.forEach(function(doc, i, arr) {
				document.getElementById("documents").innerHTML += 
					"<div style='margin-top:10px;'>"+
					"<big><a href='/visual/document?id=" + doc.id + "'>" +
					doc.title + "</a> (" + doc.count + ")</big> <br>" + 
					doc.concordance + "</div>";
			});
			document.getElementById("morelink").innerHTML = ((documents.length == count) ? "More" : "");
		});
		counter += count;
	}

</script>
 
{% endblock %}


